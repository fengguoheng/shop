"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[263],{263:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});t(4114);var n=t(641),a=t(953),o=t(33),l=t(810),s=t(4335);const i=(0,l.nY)("login",{state:()=>({form:{username:"",password:""},message:"",loginError:!1,email:""}),actions:{async sqlLogin(){try{const e=await s.A.post("https://4df1-218-56-38-235.ngrok-free.app/api/sqlLogin",{username:this.form.username,password:this.form.password});return"SQL 数据库登录成功"===e.data.message?(this.loginError=!1,this.message=e.data.message,this.email=e.data.email,localStorage.setItem("email",this.email),localStorage.setItem("username",e.data.username),localStorage.setItem("id",e.data.id),!0):(this.loginError=!0,this.message=e.data.message,!1)}catch(e){return this.message="SQL 登录失败",!1}}}});var u=t(5220);const c={class:"login-container"};var d={__name:"UserLogin",emits:["login-success"],setup(e,{emit:r}){const t=i(),l=r,s=(0,a.KR)(null),d=(0,u.rd)(),f=async()=>{const e=await t.sqlLogin();e&&(l("login-success"),window.location.href="/home")},m=()=>{window.location.href="/api/auth/github"},g=()=>{d.push("/register")},h=()=>{d.push("/home")};return(e,r)=>{const l=(0,n.g2)("el-input"),i=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-button"),d=(0,n.g2)("el-form"),p=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(p,{class:"login-card"},{header:(0,n.k6)((()=>r[2]||(r[2]=[(0,n.Lk)("h2",null,"登录",-1)]))),default:(0,n.k6)((()=>[(0,n.bF)(d,{model:(0,a.R1)(t).form,ref_key:"formRef",ref:s},{default:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,a.R1)(t).form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,a.R1)(t).form.username=e),placeholder:"用户名",class:(0,o.C4)({"error-input":(0,a.R1)(t).loginError})},null,8,["modelValue","class"])])),_:1}),(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,a.R1)(t).form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>(0,a.R1)(t).form.password=e),placeholder:"密码",type:"password"},null,8,["modelValue"])])),_:1}),(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:f},{default:(0,n.k6)((()=>r[3]||(r[3]=[(0,n.eW)("登录")]))),_:1}),(0,n.bF)(u,{onClick:g},{default:(0,n.k6)((()=>r[4]||(r[4]=[(0,n.eW)("现在去注册")]))),_:1}),(0,n.bF)(u,{id:"githubLoginBtn",onClick:m},{default:(0,n.k6)((()=>r[5]||(r[5]=[(0,n.eW)(" 使用 GitHub 登录 ")]))),_:1}),(0,n.bF)(u,{onClick:h},{default:(0,n.k6)((()=>r[6]||(r[6]=[(0,n.eW)("游客")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,n.Lk)("p",null,(0,o.v_)((0,a.R1)(t).message),1)])),_:1}),r[7]||(r[7]=(0,n.Lk)("img",{src:"/background.jpg",alt:"背景图",class:"bg-image"},null,-1))])}}},f=t(6262);const m=(0,f.A)(d,[["__scopeId","data-v-37182329"]]);var g=m},4114:function(e,r,t){var n=t(6518),a=t(8981),o=t(6198),l=t(4527),s=t(6837),i=t(9039),u=i((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=u||!c();n({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var r=a(this),t=o(r),n=arguments.length;s(t+n);for(var i=0;i<n;i++)r[t]=arguments[i],t++;return l(r,t),t}})},4376:function(e,r,t){var n=t(2195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},4527:function(e,r,t){var n=t(3724),a=t(4376),o=TypeError,l=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,r){if(a(e)&&!l(e,"length").writable)throw new o("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r}},6837:function(e){var r=TypeError,t=9007199254740991;e.exports=function(e){if(e>t)throw r("Maximum allowed index exceeded");return e}}}]);
//# sourceMappingURL=263.9717b3ff.js.map