{"version":3,"file":"js/401.128cb3a4.js","mappings":"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","sources":["webpack://client/./node_modules/core-js/modules/es.array.push.js","webpack://client/./node_modules/core-js/internals/is-array.js","webpack://client/./node_modules/core-js/internals/array-set-length.js","webpack://client/./src/store/loginStore.js","webpack://client/./src/components/UserLogin.vue","webpack://client/./src/components/UserLogin.vue?d766","webpack://client/./node_modules/core-js/internals/does-not-exceed-safe-integer.js"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","import { defineStore } from 'pinia';\r\nimport axios from 'axios';\r\nimport apiUrl from '../config.js';\r\nexport const useLoginStore = defineStore('login', {\r\n    state: () => ({\r\n        form: {\r\n            username: '',\r\n            password: '',\r\n\r\n        },\r\n        message: '',\r\n        loginError: false,\r\n        email: '',\r\n        isLoggedIn: false,\r\n    }),\r\n    actions: {\r\n        async sqlLogin() {\r\n            try {\r\n\r\n                const response = await axios.post(\r\n                    `${apiUrl}/api/sqlLogin`,\r\n                    {\r\n                        username: this.form.username,\r\n                        password: this.form.password\r\n                    },\r\n                    {\r\n                        withCredentials: true // 单个请求配置携带 Cookie\r\n                    }\r\n                );\r\n                if (response.data.message === 'SQL 数据库登录成功') {\r\n                    this.loginError = false;\r\n                    this.message = response.data.message;\r\n                    this.email = response.data.email;\r\n                    this.isLoggedIn = response.data.b;\r\n                    console.log(this.isLoggedIn);\r\n                    localStorage.setItem('isLoggedIn', this.isLoggedIn);\r\n                    localStorage.setItem('email', this.email);\r\n\r\n                    localStorage.setItem('username', response.data.username);\r\n                    localStorage.setItem('id', response.data.id);\r\n\r\n                    return true; // 表示登录成功\r\n                } else {\r\n                    this.loginError = true;\r\n                    this.message = response.data.message;\r\n                    return false;\r\n                }\r\n            } catch (error) {\r\n                this.message = 'SQL 登录失败';\r\n                return false;\r\n            }\r\n        },\r\n    },\r\n});\r\n","<template>\r\n    <div class=\"login-container\">\r\n        <el-card class=\"login-card\">\r\n            <template #header>\r\n                <h2>博客系统</h2>\r\n            </template>\r\n            <el-form :model=\"loginStore.form\" ref=\"formRef\">\r\n                <el-form-item>\r\n                    <el-input v-model=\"loginStore.form.username\" placeholder=\"用户名\"\r\n                        :class=\"{ 'error-input': loginStore.loginError }\" />\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-input v-model=\"loginStore.form.password\" placeholder=\"密码\" type=\"password\" />\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" style=\"width: 100%; text-align: center;\"\r\n                        @click=\"handleSqlLogin\">登录</el-button>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" style=\"width: 100%; text-align: center;\"\r\n                        @click=\"toRegister\">现在去注册</el-button>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" style=\"width: 100%; text-align: center;\" @click=\"handleGithubLogin\">使用\r\n                        GitHub\r\n                        登录</el-button>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" style=\"width: 100%; text-align: center;\"\r\n                        @click=\"handleVisitorLogin\">游客</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            <p>{{ loginStore.message }}</p>\r\n        </el-card>\r\n        <img src=\"background.jpg\" alt=\"背景图\" class=\"bg-image\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineEmits, ref } from 'vue';\r\nimport { useLoginStore } from '../store/loginStore';\r\nimport { useRouter } from 'vue-router'; // 引入 useRouter 钩子\r\nconst loginStore = useLoginStore();\r\nconst emits = defineEmits(['login-success']);\r\nconst formRef = ref(null);\r\nconst router = useRouter();\r\nimport apiUrl from '../config.js';\r\nconst handleSqlLogin = async () => {\r\n    const isSuccess = await loginStore.sqlLogin();\r\n    if (isSuccess) {\r\n        emits('login-success');\r\n        router.push('/home');\r\n    }\r\n};\r\nconst handleGithubLogin = () => {\r\n    window.location.href = `${apiUrl}/auth/github`;\r\n};\r\nconst toRegister = () => {\r\n    router.push('/register'); // 使用 router.push 跳转\r\n};\r\nconst handleVisitorLogin = async () => {\r\n\r\n\r\n\r\n\r\n\r\n    router.push({\r\n        name: 'vistor',\r\n\r\n    });\r\n};\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    min-height: 100vh;\r\n    position: relative;\r\n}\r\n\r\n.login-card {\r\n    width: 300px;\r\n    /* 类似手机宽度 */\r\n    padding: 20px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n    border-radius: 10px;\r\n    background-color: white;\r\n}\r\n\r\n.el-form-item {\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.bg-image {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    z-index: -1;\r\n}\r\n</style>","import script from \"./UserLogin.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserLogin.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserLogin.vue?vue&type=style&index=0&id=61ada912&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-61ada912\"]])\n\nexport default __exports__","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n"],"names":["$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","length","properErrorOnNonWritableLength","Object","defineProperty","writable","error","TypeError","FORCED","target","proto","arity","forced","item","O","this","len","argCount","arguments","i","classof","module","exports","Array","isArray","argument","DESCRIPTORS","$TypeError","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","undefined","useLoginStore","defineStore","state","form","username","password","message","loginError","email","isLoggedIn","actions","sqlLogin","response","axios","post","apiUrl","withCredentials","data","b","console","log","localStorage","setItem","id","loginStore","emits","__emit","formRef","ref","router","useRouter","handleSqlLogin","async","isSuccess","handleGithubLogin","window","location","href","toRegister","handleVisitorLogin","name","__exports__","MAX_SAFE_INTEGER","it"],"sourceRoot":""}