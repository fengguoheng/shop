{"version":3,"file":"js/502.c202e4ae.js","mappings":"yGAAA,IAAIA,EAIAA,EAAS,gDAEb,K,qTCuBA,MAAMC,GAAWC,EAAAA,EAAAA,IAAI,IACfC,GAAWD,EAAAA,EAAAA,IAAI,CAAC,GAChBE,GAAWF,EAAAA,EAAAA,IAAI,IAEfG,EAAaC,UACf,GAAKF,EAASG,MACd,IACI,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,GAAGV,EAAAA,oBAAyBI,EAASG,SACtEN,EAASM,MAAQC,EAASG,IAC9B,CAAE,MAAOC,GACLC,QAAQD,MAAM,UAAWA,EAC7B,G,OAGJE,EAAAA,EAAAA,KAAUR,UACN,IACIF,EAASG,MAAQQ,aAAaC,QAAQ,kBAChCX,GACV,CAAE,MAAOO,GACLC,QAAQD,MAAM,YAAaA,EAC/B,K,ipBC3CJ,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://client/./src/config.js","webpack://client/./src/views/消息通知.vue","webpack://client/./src/views/消息通知.vue?fa33"],"sourcesContent":["let apiUrl;\r\nif (process.env.NODE_ENV === 'development') {\r\n    apiUrl = 'https://tender-secure-bluegill.ngrok-free.app'; // 开发环境ngrok地址\r\n} else {\r\n    apiUrl = 'https://tender-secure-bluegill.ngrok-free.app'; // 这里需替换为实际生产环境API地址，若没变化还是ngrok地址\r\n}\r\nexport default apiUrl;","<template>\r\n    <div class=\"message-page\">\r\n        <div class=\"header\">\r\n            <h1 class=\"title\">消息通知</h1>\r\n            <span v-if=\"userInfo\" class=\"welcome-text\">欢迎{{ username }}</span>\r\n        </div>\r\n        <button @click=\"getMessage\" class=\"refresh-btn\">刷新消息</button>\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"message-item\">\r\n            <div class=\"message-header\">\r\n                <h3>{{ message.title }}</h3>\r\n                <span class=\"message-date\">{{ new Date(message.date).toLocaleString('zh-CN', {\r\n                    year: 'numeric',\r\n                    month: '2-digit',\r\n                    day: '2-digit',\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                    second: '2-digit'\r\n                    }) }}</span>\r\n            </div>\r\n            <p class=\"message-content\">{{ message.content }}</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport apiUrl from '../config.js';\r\n\r\nconst messages = ref([]);\r\nconst userInfo = ref({});\r\nconst username = ref('');\r\n\r\nconst getMessage = async () => {\r\n    if (!username.value) return;\r\n    try {\r\n        const response = await axios.get(`${apiUrl}/api/getMessage/${username.value}`);\r\n        messages.value = response.data;\r\n    } catch (error) {\r\n        console.error('获取消息失败:', error);\r\n    }\r\n};\r\n\r\nonMounted(async () => {\r\n    try {\r\n        username.value = localStorage.getItem('username');\r\n        await getMessage();\r\n    } catch (error) {\r\n        console.error('验证登录状态出错:', error);\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.message-page {\r\n    background-color: #f4f7f9;\r\n    padding: 20px;\r\n    min-height: 100vh;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n    font-size: 28px;\r\n    color: #007bff;\r\n    margin: 0;\r\n}\r\n\r\n.welcome-text {\r\n    font-size: 16px;\r\n    color: #6c757d;\r\n}\r\n\r\n.refresh-btn {\r\n    background-color: #007bff;\r\n    color: white;\r\n    padding: 10px 20px;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    transition: background-color 0.3s ease;\r\n}\r\n\r\n.refresh-btn:hover {\r\n    background-color: #0056b3;\r\n}\r\n\r\n.message-item {\r\n    background-color: white;\r\n    padding: 20px;\r\n    margin-bottom: 20px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.message-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.message-date {\r\n    color: #999;\r\n    font-size: 14px;\r\n}\r\n\r\n.message-content {\r\n    font-size: 16px;\r\n    color: #333;\r\n}\r\n</style>","import script from \"./消息通知.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./消息通知.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./消息通知.vue?vue&type=style&index=0&id=2721988c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2721988c\"]])\n\nexport default __exports__"],"names":["apiUrl","messages","ref","userInfo","username","getMessage","async","value","response","axios","get","data","error","console","onMounted","localStorage","getItem","__exports__"],"sourceRoot":""}