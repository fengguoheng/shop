"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[565],{4114:function(e,r,t){var a=t(6518),n=t(8981),o=t(6198),s=t(4527),l=t(6837),i=t(9039),u=i((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},m=u||!c();a({target:"Array",proto:!0,arity:1,forced:m},{push:function(e){var r=n(this),t=o(r),a=arguments.length;l(t+a);for(var i=0;i<a;i++)r[t]=arguments[i],t++;return s(r,t),t}})},4376:function(e,r,t){var a=t(2195);e.exports=Array.isArray||function(e){return"Array"===a(e)}},4527:function(e,r,t){var a=t(3724),n=t(4376),o=TypeError,s=Object.getOwnPropertyDescriptor,l=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,r){if(n(e)&&!s(e,"length").writable)throw new o("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r}},4565:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});t(4114);var a=t(641),n=t(953),o=t(33),s=t(810),l=t(4335);const i=(0,s.nY)("login",{state:()=>({form:{username:"",password:""},message:"",loginError:!1,email:""}),actions:{async sqlLogin(){try{const e=await l.A.post("/api/api/sqlLogin",{username:this.form.username,password:this.form.password});return"SQL 数据库登录成功"===e.data.message?(this.loginError=!1,this.message=e.data.message,this.email=e.data.email,localStorage.setItem("email",this.email),localStorage.setItem("username",e.data.username),localStorage.setItem("id",e.data.id),!0):(this.loginError=!0,this.message=e.data.message,!1)}catch(e){return this.message="SQL 登录失败",!1}},async mongoLogin(){try{const e=await l.A.post("/api/api/mongoLogin",{username:this.form.username,password:this.form.password});return this.message=e.data.message,!0}catch(e){return this.message="MongoDB 登录失败",!1}}}}),u={class:"login-container"};var c={__name:"UserLogin",emits:["login-success"],setup(e,{emit:r}){const t=i(),s=r,l=(0,n.KR)(null),c=async()=>{const e=await t.sqlLogin();e&&(s("login-success"),window.location.href="/home")},m=()=>{window.location.href="/api/auth/github"},d=()=>{window.location.href="/register"},g=()=>{console.log("1232"),window.location.href="/home",router.push("/home")};return(e,r)=>{const s=(0,a.g2)("el-input"),i=(0,a.g2)("el-form-item"),f=(0,a.g2)("el-button"),h=(0,a.g2)("el-form"),p=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(p,{class:"login-card"},{header:(0,a.k6)((()=>r[2]||(r[2]=[(0,a.Lk)("h2",null,"登录",-1)]))),default:(0,a.k6)((()=>[(0,a.bF)(h,{model:(0,n.R1)(t).form,ref_key:"formRef",ref:l},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{modelValue:(0,n.R1)(t).form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.R1)(t).form.username=e),placeholder:"用户名",class:(0,o.C4)({"error-input":(0,n.R1)(t).loginError})},null,8,["modelValue","class"])])),_:1}),(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{modelValue:(0,n.R1)(t).form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>(0,n.R1)(t).form.password=e),placeholder:"密码",type:"password"},null,8,["modelValue"])])),_:1}),(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"primary",onClick:c},{default:(0,a.k6)((()=>r[3]||(r[3]=[(0,a.eW)("登录")]))),_:1}),(0,a.bF)(f,{onClick:d},{default:(0,a.k6)((()=>r[4]||(r[4]=[(0,a.eW)("现在去注册")]))),_:1}),(0,a.bF)(f,{id:"githubLoginBtn",onClick:m},{default:(0,a.k6)((()=>r[5]||(r[5]=[(0,a.eW)(" 使用 GitHub 登录 ")]))),_:1}),(0,a.bF)(f,{onClick:g},{default:(0,a.k6)((()=>r[6]||(r[6]=[(0,a.eW)("游客")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,a.Lk)("p",null,(0,o.v_)((0,n.R1)(t).message),1)])),_:1}),r[7]||(r[7]=(0,a.Lk)("img",{src:"/background.jpg",alt:"背景图",class:"bg-image"},null,-1))])}}},m=t(6262);const d=(0,m.A)(c,[["__scopeId","data-v-76f086d2"]]);var g=d},6837:function(e){var r=TypeError,t=9007199254740991;e.exports=function(e){if(e>t)throw r("Maximum allowed index exceeded");return e}}}]);
//# sourceMappingURL=565.99f45267.js.map