"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[803],{4114:function(e,r,t){var o=t(6518),a=t(8981),n=t(6198),s=t(4527),l=t(6837),i=t(9039),u=i((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},m=u||!c();o({target:"Array",proto:!0,arity:1,forced:m},{push:function(e){var r=a(this),t=n(r),o=arguments.length;l(t+o);for(var i=0;i<o;i++)r[t]=arguments[i],t++;return s(r,t),t}})},4376:function(e,r,t){var o=t(2195);e.exports=Array.isArray||function(e){return"Array"===o(e)}},4527:function(e,r,t){var o=t(3724),a=t(4376),n=TypeError,s=Object.getOwnPropertyDescriptor,l=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,r){if(a(e)&&!s(e,"length").writable)throw new n("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r}},4803:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});t(4114);var o=t(641),a=t(953),n=t(33),s=t(810),l=t(4335);const i=(0,s.nY)("login",{state:()=>({form:{username:"",password:""},message:"",loginError:!1,email:""}),actions:{async sqlLogin(){try{const e=await l.A.post("/api/api/sqlLogin",{username:this.form.username,password:this.form.password});return"SQL 数据库登录成功"===e.data.message?(this.loginError=!1,this.message=e.data.message,this.email=e.data.email,localStorage.setItem("email",this.email),localStorage.setItem("username",e.data.username),localStorage.setItem("id",e.data.id),!0):(this.loginError=!0,this.message=e.data.message,!1)}catch(e){return this.message="SQL 登录失败",!1}},async mongoLogin(){try{const e=await l.A.post("/api/api/mongoLogin",{username:this.form.username,password:this.form.password});return this.message=e.data.message,!0}catch(e){return this.message="MongoDB 登录失败",!1}}}}),u={class:"login-container"};var c={__name:"UserLogin",emits:["login-success"],setup(e,{emit:r}){const t=i(),s=r,l=(0,a.KR)(null),c=async()=>{const e=await t.sqlLogin();e&&(s("login-success"),window.location.href="/shop/home")},m=()=>{window.location.href="/api/auth/github"},d=()=>{window.location.href="/shop/register"},g=()=>{console.log("1232"),window.location.href="/shop/home",router.push("/shop/home")};return(e,r)=>{const s=(0,o.g2)("el-input"),i=(0,o.g2)("el-form-item"),f=(0,o.g2)("el-button"),h=(0,o.g2)("el-form"),p=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.CE)("div",u,[(0,o.bF)(p,{class:"login-card"},{header:(0,o.k6)((()=>r[2]||(r[2]=[(0,o.Lk)("h2",null,"登录",-1)]))),default:(0,o.k6)((()=>[(0,o.bF)(h,{model:(0,a.R1)(t).form,ref_key:"formRef",ref:l},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(s,{modelValue:(0,a.R1)(t).form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,a.R1)(t).form.username=e),placeholder:"用户名",class:(0,n.C4)({"error-input":(0,a.R1)(t).loginError})},null,8,["modelValue","class"])])),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(s,{modelValue:(0,a.R1)(t).form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>(0,a.R1)(t).form.password=e),placeholder:"密码",type:"password"},null,8,["modelValue"])])),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,{type:"primary",onClick:c},{default:(0,o.k6)((()=>r[3]||(r[3]=[(0,o.eW)("登录")]))),_:1}),(0,o.bF)(f,{onClick:d},{default:(0,o.k6)((()=>r[4]||(r[4]=[(0,o.eW)("现在去注册")]))),_:1}),(0,o.bF)(f,{id:"githubLoginBtn",onClick:m},{default:(0,o.k6)((()=>r[5]||(r[5]=[(0,o.eW)(" 使用 GitHub 登录 ")]))),_:1}),(0,o.bF)(f,{onClick:g},{default:(0,o.k6)((()=>r[6]||(r[6]=[(0,o.eW)("游客")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,o.Lk)("p",null,(0,n.v_)((0,a.R1)(t).message),1)])),_:1}),r[7]||(r[7]=(0,o.Lk)("img",{src:"/background.jpg",alt:"背景图",class:"bg-image"},null,-1))])}}},m=t(6262);const d=(0,m.A)(c,[["__scopeId","data-v-2135f79c"]]);var g=d},6837:function(e){var r=TypeError,t=9007199254740991;e.exports=function(e){if(e>t)throw r("Maximum allowed index exceeded");return e}}}]);
//# sourceMappingURL=803.4d4911fe.js.map