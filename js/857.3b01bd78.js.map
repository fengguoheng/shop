{"version":3,"file":"js/857.3b01bd78.js","mappings":"0ZA8CA,MAAMA,GAAcC,EAAAA,EAAAA,IAAI,QAClBC,EAAgBC,IAClBC,QAAQC,IAAI,QAASF,EAEjB,EAGFG,GAAcL,EAAAA,EAAAA,IAAI,IAClBM,GAAcN,EAAAA,EAAAA,IAAI,MAClBO,GAAaP,EAAAA,EAAAA,KAAI,GACjBQ,GAAWR,EAAAA,EAAAA,IAAI,CAAC,GAChBS,GAAWT,EAAAA,EAAAA,IAAI,IACfU,EAAaC,UACf,IACI,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,GAAGC,EAAAA,kBACpCV,EAAYW,MAAQJ,EAASK,IACjC,CAAE,MAAOC,GACLf,QAAQe,MAAM,YAAaA,EAC/B,GAEEC,EAAWA,KACbC,EAAAA,EAAOC,KAAK,UAAU,EAEpBC,EAAUA,KACZF,EAAAA,EAAOC,KAAK,SAAS,EAEnBE,EAAYA,KACd,MAAMC,EAAcC,SAASC,eAAe,eACxCF,EAAYG,QACZH,EAAYI,OACZtB,EAAYU,MAAMa,YAAc,SAEhCL,EAAYM,QACZxB,EAAYU,MAAMa,YAAc,OACpC,E,OAEJE,EAAAA,EAAAA,KAAUpB,UACN,IAAKR,QAAQC,IAAI,OAAQ4B,aAAaC,QAAQ,aAC9CxB,EAASO,MAAMgB,aAAaC,QAAQ,YACpC9B,QAAQC,IAAI,OAAQK,EAASO,OAIzBN,IACA,MAAME,QAAiBC,EAAAA,EAAMC,IAAI,GAAGC,EAAAA,UAAgB,CAChDmB,iBAAiB,IAGjBtB,EAASK,KAAKV,aACdA,EAAWS,OAAQ,EACnBR,EAASQ,MAAQJ,EAASK,MAE9Bd,QAAQC,IAAI,OAAQI,EAASQ,MAAMP,SACvC,CAAE,MAAOS,GACLf,QAAQe,MAAM,YAAaA,EAC/B,CACAX,EAAWS,MAAMgB,aAAaC,QAAQ,aAAa,I,guDChGvD,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://client/./src/views/Home.vue","webpack://client/./src/views/Home.vue?9051"],"sourcesContent":["<template>\r\n    <div class=\"nav-container\">\r\n        <div class=\"header-section\">\r\n            <h1 class=\"title\">博·客·系·统</h1>\r\n            <span  v-if=\"userInfo\" class=\"designer\">欢迎{{ username }}</span>\r\n        </div>\r\n        <el-menu class=\"nav-menu\" mode=\"horizontal\" :default-active=\"activeIndex\" @select=\"handleSelect\">\r\n            <el-menu-item index=\"home\">首页</el-menu-item>\r\n            <el-menu-item @click=\"toPerson\" index=\"personal\">个人主页</el-menu-item>\r\n            <el-menu-item index=\"friends\">好友</el-menu-item>\r\n            <el-menu-item index=\"game\">游戏</el-menu-item>\r\n            <el-menu-item index=\"about\">关于我们</el-menu-item>\r\n            <el-menu-item index=\"exit\">退出</el-menu-item>\r\n        </el-menu>\r\n        <div class=\"blog-container\">\r\n            <el-card v-for=\"blog in sortedBlogs\" :key=\"blog.id\" class=\"blog-card\">\r\n                <template #header>\r\n                    <h3>{{ blog.title }}</h3>\r\n                    <h4>{{ blog.username }}</h4>\r\n                    <span class=\"blog-date\">{{ new Date(blog.date).toLocaleString('zh-CN', {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit',\r\n                        second: '2-digit'\r\n                    }) }}</span>\r\n                </template>\r\n                <div class=\"blog-content\">\r\n                    {{ blog.content }}\r\n                </div>\r\n            </el-card>\r\n        </div>\r\n        <button @click='toWrite' id=\"writeArticleBtn\">撰写文章</button>\r\n    </div>\r\n    <!-- 隐藏的音频容器 -->\r\n    <audio id=\"musicPlayer\" src=\"船长.mp3\" controls style=\"display: none;\"></audio>\r\n\r\n    <!-- 播放音乐按钮 -->\r\n    <button ref=\"musicBtnRef\" class=\"music-btn\" @click=\"playMusic()\">播放音乐</button>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport router from '../router/index.js';\r\nimport apiUrl from '../config.js';\r\nconst activeIndex = ref('home');\r\nconst handleSelect = (index) => {\r\n    console.log('当前选中：', index);\r\n    if (index === 'exit') {\r\n        // 可在此处添加退出登录等逻辑\r\n    }\r\n};\r\nconst sortedBlogs = ref([]);\r\nconst musicBtnRef = ref(null);\r\nconst isLoggedIn = ref(false);\r\nconst userInfo = ref({});\r\nconst username = ref('');\r\nconst fetchBlogs = async () => {\r\n    try {\r\n        const response = await axios.get(`${apiUrl}/api/getBlogs`);\r\n        sortedBlogs.value = response.data;\r\n    } catch (error) {\r\n        console.error('获取博客数据失败:', error);\r\n    }\r\n};\r\nconst toPerson = () => {\r\n    router.push('/person'); // 使用 router.push 进行路由跳转\r\n};\r\nconst toWrite = () => {\r\n    router.push('/write'); // 使用 router.push 进行路由跳转 \r\n}\r\nconst playMusic = () => {\r\n    const musicPlayer = document.getElementById('musicPlayer');\r\n    if (musicPlayer.paused) {\r\n        musicPlayer.play();\r\n        musicBtnRef.value.textContent = \"暂停音乐\"; // 切换为暂停文字\r\n    } else {\r\n        musicPlayer.pause();\r\n        musicBtnRef.value.textContent = \"播放音乐\"; // 切换回播放文字\r\n    }\r\n};\r\nonMounted(async () => {\r\n    try {console.log('4444', localStorage.getItem('username'));\r\n    username.value=localStorage.getItem('username');\r\n    console.log('5555', username.value);\r\n        \r\n            \r\n        \r\n        fetchBlogs();\r\n        const response = await axios.get(`${apiUrl}/check`, {\r\n            withCredentials: true // 携带 cookie 信息\r\n        });\r\n        \r\n        if (response.data.isLoggedIn) {\r\n            isLoggedIn.value = true;\r\n            userInfo.value = response.data;\r\n        }\r\n        console.log('用户名:', userInfo.value.username);\r\n    } catch (error) {\r\n        console.error('验证登录状态出错:', error);\r\n    }\r\n    isLoggedIn.value=localStorage.getItem('isLoggedIn');\r\n    \r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.nav-container {\r\n    background: #e3e9f3;\r\n    padding: 15px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.header-section {\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n    font-size: 28px;\r\n    color: #4CAF50;\r\n    margin: 0;\r\n    font-weight: 600;\r\n}\r\n\r\n.designer {\r\n    font-size: 14px;\r\n    color: #6c757d;\r\n    margin-top: 5px;\r\n    display: block;\r\n}\r\n\r\n.nav-menu {\r\n    justify-content: center;\r\n    gap: 12px;\r\n}\r\n\r\n.el-menu-item {\r\n    padding: 12px 22px;\r\n    border-radius: 8px;\r\n    font-size: 16px;\r\n}\r\n\r\n.blog-container {\r\n    padding: 20px;\r\n}\r\n\r\n.blog-card {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.blog-date {\r\n    float: right;\r\n    color: #999;\r\n}\r\n\r\n.blog-content {\r\n    margin-top: 10px;\r\n}\r\n\r\n#writeArticleBtn {\r\n    position: fixed;\r\n    /* 固定定位 */\r\n    bottom: 30px;\r\n    /* 距离底部30px */\r\n    right: 30px;\r\n    /* 距离右侧30px */\r\n    padding: 12px 24px;\r\n    background-color: #409eff;\r\n    /* 按钮颜色 */\r\n    color: white;\r\n    border: none;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    z-index: 999;\r\n    /* 确保按钮在顶层 */\r\n}\r\n\r\n/* 固定按钮样式 */\r\n.music-btn {\r\n    position: fixed;\r\n    top: 20px;\r\n    /* 距离顶部20px */\r\n    right: 20px;\r\n    /* 距离右侧20px */\r\n    padding: 10px 20px;\r\n    background-color: #42b983;\r\n    /* 按钮颜色 */\r\n    color: white;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    z-index: 999;\r\n    /* 确保按钮在顶层 */\r\n}\r\n</style>","import script from \"./Home.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Home.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=1a6ecb4d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1a6ecb4d\"]])\n\nexport default __exports__"],"names":["activeIndex","ref","handleSelect","index","console","log","sortedBlogs","musicBtnRef","isLoggedIn","userInfo","username","fetchBlogs","async","response","axios","get","apiUrl","value","data","error","toPerson","router","push","toWrite","playMusic","musicPlayer","document","getElementById","paused","play","textContent","pause","onMounted","localStorage","getItem","withCredentials","__exports__"],"sourceRoot":""}