{"version":3,"file":"js/953.2182c433.js","mappings":"mOA4BA,MAAMA,GAAWC,EAAAA,EAAAA,IAAI,CACjBC,SAAU,GACVC,SAAU,GACVC,MAAO,KAILC,GAAUJ,EAAAA,EAAAA,IAAI,OAGpBK,EAAAA,EAAAA,KAAmB,CAACC,EAAIC,KACpBC,QAAQC,IAAI,oBAAoBF,EAAKG,YAAYJ,EAAGI,SAC7C,MAIXC,EAAAA,EAAAA,KAAoB,CAACL,EAAIC,KACrBC,QAAQC,IAAI,oBACL,KAIX,MAAMG,EAAiBA,KAEdb,EAASc,MAAMZ,UAAaF,EAASc,MAAMX,UAAaH,EAASc,MAAMV,MAM5EW,MAAM,oBAAqB,CACvBC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAUpB,EAASc,SAE7BO,MAAKC,IACF,GAAIA,EAASC,GACT,OAAOD,EAASE,OAEpB,MAAM,IAAIC,MAAM,SAAS,IAE5BJ,MAAKK,IACEA,EAAKC,SACLC,EAAAA,GAAUD,QAAQ,SAElB3B,EAASc,MAAMZ,SAAW,GAC1BF,EAASc,MAAMX,SAAW,GAC1BH,EAASc,MAAMV,MAAQ,IAEvBwB,EAAAA,GAAUC,MAAMH,EAAKI,SAAW,aACpC,IAEHC,OAAMF,IACHpB,QAAQoB,MAAM,UAAWA,GACzBD,EAAAA,GAAUC,MAAM,eAAe,IA7BnCD,EAAAA,GAAUC,MAAM,WA8Bd,E,+rCC7EV,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://client/./src/components/UserRegister.vue","webpack://client/./src/components/UserRegister.vue?91a5"],"sourcesContent":["<template>\r\n    <el-container class=\"register-container\">\r\n        <el-main>\r\n            <h1>注册账号</h1>\r\n            <el-form ref=\"formRef\" :model=\"formData\" label-width=\"80px\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input v-model=\"formData.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input v-model=\"formData.password\" type=\"password\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input v-model=\"formData.email\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"handleRegister\">注册</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-main>\r\n    </el-container>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { onBeforeRouteLeave, onBeforeRouteUpdate } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\n\r\n// 表单数据\r\nconst formData = ref({\r\n    username: '',\r\n    password: '',\r\n    email: '',\r\n});\r\n\r\n// 表单引用\r\nconst formRef = ref(null);\r\n\r\n// 组件内守卫 - 离开当前组件时触发\r\nonBeforeRouteLeave((to, from) => {\r\n    console.log(`离开注册页面的组件内守卫:即将从 ${from.path} 导航到 ${to.path}`);\r\n    return true;\r\n});\r\n\r\n// 组件内守卫 - 路由更新时触发（当前组件实例复用情况下）\r\nonBeforeRouteUpdate((to, from) => {\r\n    console.log('注册页面 组件路由更新前的守卫');\r\n    return true;\r\n});\r\n\r\n// 处理注册逻辑\r\nconst handleRegister = () => {\r\n    // 先检查表单信息是否完整\r\n    if (!formData.value.username || !formData.value.password || !formData.value.email) {\r\n        ElMessage.error('请填写完整信息！');\r\n        return;\r\n    }\r\n\r\n    // 发送注册请求到后端\r\n    fetch('/api/api/register', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData.value),\r\n    })\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json(); // 解析 JSON 响应体\r\n            }\r\n            throw new Error('注册请求失败');\r\n        })\r\n        .then(data => {\r\n            if (data.success) {\r\n                ElMessage.success('注册成功！');\r\n                // 清空表单\r\n                formData.value.username = '';\r\n                formData.value.password = '';\r\n                formData.value.email = '';\r\n            } else {\r\n                ElMessage.error(data.message || '注册失败，请稍后重试');\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('注册请求出错:', error);\r\n            ElMessage.error('注册请求出错，请稍后重试');\r\n        });\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n    height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n</style>","import script from \"./UserRegister.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserRegister.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserRegister.vue?vue&type=style&index=0&id=5fbb9ccc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5fbb9ccc\"]])\n\nexport default __exports__"],"names":["formData","ref","username","password","email","formRef","onBeforeRouteLeave","to","from","console","log","path","onBeforeRouteUpdate","handleRegister","value","fetch","method","headers","body","JSON","stringify","then","response","ok","json","Error","data","success","ElMessage","error","message","catch","__exports__"],"sourceRoot":""}